<!DOCTYPE html>
<!--
Copyright (c) 2014 The Finnish Board of Education - Opetushallitus

This program is free software:  Licensed under the EUPL, Version 1.1 or - as
soon as they will be approved by the European Commission - subsequent versions
of the EUPL (the "Licence");

You may not use this work except in compliance with the Licence.
You may obtain a copy of the Licence at: http://www.osor.eu/eupl/

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-->

<!-- Organisaation muokkaus -->
<form name="form" class="form-horizontal" novalidate>
    <div class="control-group" >
        <div class="offset2">
            <h3>
                <span ng-show="model.mode === 'edit'">{{t('Organisaationmuokkaus.muokkaus')}} {{model.uriLocalizedNames["nimi"]}}</span>
                <span ng-show="model.mode === 'new'">{{t('Organisaationmuokkaus.uudenluonti')}} {{model.uriLocalizedNames["parentnimi"]}}</span>
                <span ng-show="model.paivitys.pvm" id="paivittaja">
                ({{t('Organisaationtarkastelu.tallennettu')}} {{model.paivitys.pvm}}, {{model.paivitys.paivittaja}})</span>
            </h3>
            <div ng-if="!!model.organisaatio.ytjkieli">
                <span tt="organisaationmuokkaus.ohje.ytj_tiedot">YTJ:n tiedot päivitetään joka yö</span>
            </div>
            <div>
                <span class="pull-right">
                    <div ng-if="!!model.organisaatio.ytjkieli">
                    <a href="https://www.ytj.fi/index/ilmoittaminen/muutosilmoitus.html" target="_blank"><i class="icon-pencil" aria-hidden="true"></i>
                        &nbsp;<label style="display: inline" tt="organisaationmuokkaus.ohje.ytj_muokkaus_link">Muuta YTJ-tietoja</label></a>
                        </div>

                    <div ng-if="model.isOppilaitos() || model.isOppisopimusToimipiste()">
                        <a href="https://link.webropolsurveys.com/S/D90BF1EA77056AE8" target="_blank"><i class="icon-pencil" aria-hidden="true"></i>
                            &nbsp;<label style="display: inline" tt="organisaationmuokkaus.ohje.organisaatiomuutos">Ilmoita organisaatiomuutoksesta</label></a>
                        </div>
                </span>
            </div>
            <div>
                <em class="muted" tt="Organisaationmuokkaus.ohje.pakollisuus">Pakollisuusohje</em>
            </div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label">
            {{:: t('Organisaationtarkastelu.organisaatiotyyppi')}}*
        </label>

        <div class="controls" ng-if="model.koodisto.organisaatiotyypit.length">
            <span ng-repeat="tyyppiKoodi in model.koodisto.organisaatiotyypit">
                <span ng-if="model.koodisto.ophOrganisaatiot.indexOf(tyyppiKoodi.koodiUri) > -1">
                    <input class="" type='checkbox' name="orgtyyppi" ng-model='dummy_orgtyyppi'
                           auth="updateOph" auth-service="APP_ORGANISAATIOHALLINTA" auth-disable="true"
                           ng-checked="model.organisaatio.tyypit.indexOf(tyyppiKoodi.koodiUri) !== -1"
                           ng-click="model.toggleCheckOrganisaatio(tyyppiKoodi.koodiUri);form.$dirty = true">
                    {{getKoodiLocalized(tyyppiKoodi.koodiUri)}}
                </span>
                <span ng-if="(model.koodisto.ophOrganisaatiot.indexOf(tyyppiKoodi.koodiUri) === -1)">
                    <input type='checkbox' name="orgtyyppi" ng-model='dummy_orgtyyppi'
                           ng-checked="model.organisaatio.tyypit.indexOf(tyyppiKoodi.koodiUri) !== -1"
                           ng-click="model.toggleCheckOrganisaatio(tyyppiKoodi.koodiUri);form.$dirty = true">
                    {{getKoodiLocalized(tyyppiKoodi.koodiUri)}}
                </span>
            </span>
            <!-- Näytetään tyypit, jotka eivät hierarkiasääntöjen mukaan ole valideja -->
            <span ng-repeat="tyyppi in ::model.organisaatio.tyypit">
                <span ng-if="isNotInOrganisaatiotyypit(tyyppi)">
                    <input class="" type='checkbox' name="orgtyyppi" ng-model='dummy_orgtyyppi'
                           ng-checked="model.organisaatio.tyypit.indexOf(tyyppi) !== - 1" disabled>
                    {{getKoodiLocalized(tyyppi)}}
                </span>
            </span>
            <div ng-if="model.organisaatio.tyypit.length === 0">
                <input type="hidden" name="organisaatiotyyppi" ng-model="organisaatiotyyppi" required>
                <span class="text-error" ng-show="form.organisaatiotyyppi.$error.required">
                    {{:: t('Organisaationtarkastelu.organisaatiotyyppi')}}
                    {{:: t('Organisaationmuokkaus.validointi.pakollinen')}}
                </span>
            </div>
        </div>
    </div>
    <div class="control-group" ng-if="model.isKoulutustoimija() || model.isVarhaiskasvatuksenJarjestaja()">
        <label class="control-label" tt="Organisaationtarkastelu.yritysmuoto">
            Yritysmuoto
        </label>
        <div class="controls">
            <input id="yritysmuoto" type="text" maxlength="255" name="yritysmuoto"
                   ng-model="model.organisaatio.yritysmuoto" oph-set-dirty="model.mode==='new'"
                   ie-placeholder placeholder="{{t('Organisaationtarkastelu.yritysmuoto')}}" disabled/>
        </div>
    </div>

    <div class="control-group" ng-if="model.isKoulutustoimija()">
        <label class="control-label" tt="Organisaationtarkastelu.ytunnus">
            ytunnus
        </label>
        <div class="controls">
            <input id="ytunnus" type="text" maxlength="9" name="ytunnus" oph-enter
                   auth="updateOph" auth-service="APP_ORGANISAATIOHALLINTA" auth-disable="true"
                   ng-model="model.organisaatio.ytunnus"
                   ie-placeholder placeholder="{{t('Organisaationtarkastelu.ytunnus')}}" ng-pattern="/^\d{7}-./"/>
            <button auth="crudOph" auth-service="APP_ORGANISAATIOHALLINTA" ng-if="model.isKoulutustoimija()"
                    class="btn" ng-click="haeYtjTiedot(model.organisaatio.ytunnus)"
                    uib-tooltip="{{t('Organisaatiot.ohje.haeytjtiedot')}}" tt="Organisaationmuokkaus.paivitaYtj">
                Päivitä YTJ
            </button>
            <div>
                <span class="text-error" ng-show="form.ytunnus.$error.pattern" tt="Organisaationmuokkaus.validointi.ytunnus">
                    y-tunnus
                </span>
            </div>
        </div>
    </div>

    <div class="control-group" ng-if="model.isKoulutustoimija()">
        <label class="control-label" tt="Organisaationtarkastelu.virastotunnus">
            Virastotunnus
        </label>
        <div class="controls">
            <input id="virastotunnus" type="text" maxlength="20" name="virastotunnus" oph-enter
                   auth="updateOph" auth-service="APP_ORGANISAATIOHALLINTA" auth-disable="true"
                   ng-model="model.organisaatio.virastoTunnus"
                   ie-placeholder placeholder="{{t('Organisaationtarkastelu.virastotunnus')}}" ng-pattern="/^\d{6}.*/"/>
            <div>
                <span class="text-error" ng-show="form.virastotunnus.$error.pattern" tt="Organisaationmuokkaus.validointi.virastotunnus">
                    validointi.virastotunnus
                </span>
            </div>
        </div>
    </div>

    <div class="control-group" ng-if="model.isOppilaitos()">
        <label class="control-label">
            {{t('Organisaationtarkastelu.oppilaitoskoodi')}}*
        </label>
        <div class="controls">
            <input id="oppilaitoskoodi" type="text" maxlength="20" name="oppilaitoskoodi"
                   auth="updateOph" auth-service="APP_ORGANISAATIOHALLINTA" auth-disable="true"
                   ng-model="model.organisaatio.oppilaitosKoodi"
                   ie-placeholder placeholder="{{t('Organisaationtarkastelu.oppilaitoskoodi')}}" required ng-pattern="/^\d{5}$/"/>
            <div>
                <span class="text-error" ng-show="form.oppilaitoskoodi.$error.required">
                    {{t('Organisaationtarkastelu.oppilaitoskoodi')}}
                    {{t('Organisaationmuokkaus.validointi.pakollinen')}}
                </span>
                <span class="text-error" ng-show="form.oppilaitoskoodi.$error.pattern" tt="Organisaationmuokkaus.validointi.oppilaitoskoodi">
                    Oppilaitoskoodi
                </span>
            </div>
        </div>
    </div>

    <div class="control-group" ng-if="model.isOppilaitos()">
        <label class="control-label">
            {{t('Organisaationtarkastelu.oppilaitostyyppi')}}*
        </label>
        <div class="controls">
            <select id="oppilaitostyyppi" ng-model="model.organisaatio.oppilaitosTyyppiUri" class="span6"
                    auth="updateOph" auth-service="APP_ORGANISAATIOHALLINTA" auth-disable="true"
                    ng-options="olTyyppi.uri as olTyyppi.nimi for olTyyppi in model.koodisto.oppilaitostyypit | orderBy:'nimi'"
                    ng-change="model.selectOppilaitosTyyppi(); form.$dirty = true" required>
                <option value="" tt="Organisaationmuokkaus.valitse">Valitse</option>
            </select>
            <div ng-if="!model.organisaatio.oppilaitosTyyppiUri">
                <input type="hidden" name="oppilaitostyyppi" ng-model="oppilaitostyyppi" required>
                <span class="text-error" ng-show="form.oppilaitostyyppi.$error.required">
                    {{t('Organisaationtarkastelu.oppilaitostyyppi')}}
                    {{t('Organisaationmuokkaus.validointi.pakollinen')}}
                </span>
            </div>
        </div>
    </div>

    <div class="control-group" ng-if="model.hasVuosiluokat()">
        <label class="control-label" tt="Organisaationtarkastelu.vuosiluokat">
            Vuosiluokat
        </label>
        <div class="controls">
            <div ng-repeat="vl in model.koodisto.vuosiluokat| orderBy:'nimi'">
                <div>
                    <input type='checkbox' name="vuosiluokka"
                           ng-checked="model.organisaatio.vuosiluokat.indexOf(vl.uri) !== - 1"
                           ng-click="model.toggleCheckVuosiluokka(vl.uri);
                                       form.$dirty = true">{{model.uriLocalizedNames[vl.uri]}}
                </div>
            </div>
        </div>
    </div>

    <div class="control-group" ng-if="model.mahdollisetLisatiedot && model.mahdollisetLisatiedot.length">
        <label class="control-label" tt="Organisaationtarkastelu.lisatiedot">
            Organisaationtarkastelu.lisatiedot
        </label>
        <div class="controls">
            <div ng-repeat="lisatieto in model.mahdollisetLisatiedot">
                <div>
                    <input type="checkbox"
                           name="lisatieto"
                           ng-checked="model.organisaatio.lisatiedot.indexOf(lisatieto) !== -1"
                           ng-click="model.toggleLisatieto(lisatieto); form.$dirty = true;"
                    >{{::lisatieto | i18n}}
                </div>
            </div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label">
            {{t('Organisaationtarkastelu.nimi')}}*
        </label>
        <div class="controls">
            <label>
                <div ng-repeat="avain in organisaatioNimiLangs(model.organisaatio.nimi)| orderBy:orderByLang">
                    {{model.organisaatio.nimi[avain] | decodeAmp}} [{{avain}}]<br>
                </div>
                <div ng-if="model.organisaationTulevaNimi.alkuPvm">
                    <br>
                    {{model.organisaationTulevaNimi.alkuPvm | date:'dd.MM.yyyy'}} <i class="icon-arrow-right"></i>
                    <div ng-repeat="avain in organisaatioNimiLangs(model.organisaationTulevaNimi.nimi)| orderBy:orderByLang">
                        <span ng-if="model.organisaationTulevaNimi.nimi[avain]">{{model.organisaationTulevaNimi.nimi[avain] | decodeAmp}} [{{avain}}]</span><br>
                    </div>
                </div>
            </label>
            <button ng-if="model.isKoulutustoimija() || model.isOppilaitos()"
                    auth="updateOph" auth-service="APP_ORGANISAATIOHALLINTA" auth-disable="true"
                    class="btn" ng-click="openNimenMuokkaus()">
                <i class="icon-pencil"></i> {{t('Organisaationmuokkaus.muokkaaNimea')}}
            </button>
            <button ng-if="model.isKoulutustoimija() === false && model.isOppilaitos() === false"
                    class="btn" ng-click="openNimenMuokkaus()">
                <i class="icon-pencil"></i> {{t('Organisaationmuokkaus.muokkaaNimea')}}
            </button>
            <div ng-if="!(model.organisaatio.nimi.fi || model.organisaatio.nimi.sv || model.organisaatio.nimi.en)">
                <input type="hidden" name="nimi" ng-model="nimi" required>
                <span class="text-error" ng-show="form.nimi.$error.required" tt="Organisaationmuokkaus.ohje.nimet">
                    ohje.nimet
                </span>
            </div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label">
            {{t('Organisaationtarkastelu.voimassaolo')}}*
        </label>
        <div class="controls">
            <div>
                <!-- koulutustoimija ja oppilaitos, voimassaolo-popup-->
                <input ng-show="model.hasAliorganisaatios && model.mode !== 'new'"
                       ng-if="model.isKoulutustoimija() || model.isOppilaitos()" oph-enter
                       auth="updateOph" auth-service="APP_ORGANISAATIOHALLINTA" auth-disable="true"
                       type="text" name="luontipvm2" uib-tooltip="{{t('Organisaationmuokkaus.ohje.aloitamuokkaus')}}"
                       datetext noedit ng-click="openVoimassaolonMuokkaus(true)" ng-model="model.organisaatio.alkuPvm"
                       ie-placeholder placeholder="{{t('Organisaationmuokkaus.luontipvm')}}">
                <!-- toimipiste ja muut, aliorganisaatioita, voimassaolo-popup-->
                <input ng-disabled="!model.aliorganisaatioTiedotHaettu && model.mode !== 'new'"
                       ng-show="model.hasAliorganisaatios && model.mode !== 'new'"
                       ng-if="model.isKoulutustoimija() === false && model.isOppilaitos() === false" oph-enter
                       type="text" name="luontipvm2" uib-tooltip="{{t('Organisaationmuokkaus.ohje.aloitamuokkaus')}}"
                       datetext noedit ng-click="openVoimassaolonMuokkaus(true)" ng-model="model.organisaatio.alkuPvm"
                       ie-placeholder placeholder="{{t('Organisaationmuokkaus.luontipvm')}}">
                <!-- koulutustoimija ja oppilaitos, datepicker-->
                <input ng-if="(model.isKoulutustoimija() || model.isOppilaitos()) && (!model.hasAliorganisaatios || model.mode === 'new')"
                       oph-enter auth="updateOph" auth-service="APP_ORGANISAATIOHALLINTA" auth-disable="true"
                       type="text" name="luontipvm" formatteddate uib-datepicker-popup="dd.MM.yyyy" is-open="dpOpen2"
                       ng-click="dpOpen2=true" min="'1900-01-01'" max="'2030-12-31'" ng-model="model.organisaatio.alkuPvm"
                       close-on-date-selection="true" ie-placeholder placeholder="{{t('Organisaationmuokkaus.luontipvm')}}"
                       close-text="{{t('Organisaationmuokkaus.sulje')}}"
                       current-text="{{t('Organisaationmuokkaus.tanaan')}}"
                       clear-text="{{t('Organisaationmuokkaus.tyhjenna')}}"
                       toggle-weeks-text="{{t('Organisaationmuokkaus.viikkonumerot')}}" required/>
                <!-- toimipiste ja muut, datepicker-->
                <input ng-disabled="!model.aliorganisaatioTiedotHaettu && model.mode !== 'new'"
                       ng-if="model.isKoulutustoimija() === false && model.isOppilaitos() === false
                       && !(model.hasAliorganisaatios && model.mode !== 'new')"
                       oph-enter type="text" name="luontipvm" formatteddate uib-datepicker-popup="dd.MM.yyyy" is-open="dpOpen1"
                       ng-click="dpOpen1=true" min="'1900-01-01'" max="'2030-12-31'" ng-model="model.organisaatio.alkuPvm"
                       close-on-date-selection="true" ie-placeholder placeholder="{{t('Organisaationmuokkaus.luontipvm')}}"
                       close-text="{{t('Organisaationmuokkaus.sulje')}}"
                       current-text="{{t('Organisaationmuokkaus.tanaan')}}"
                       clear-text="{{t('Organisaationmuokkaus.tyhjenna')}}"
                       toggle-weeks-text="{{t('Organisaationmuokkaus.viikkonumerot')}}" required/>
                &nbsp;-&nbsp;
                <!-- koulutustoimija ja oppilaitos, voimassaolo-popup-->
                <input ng-show="model.hasAliorganisaatios && model.mode !== 'new'"
                       ng-if="model.isKoulutustoimija() || model.isOppilaitos()" oph-enter
                       auth="updateOph" auth-service="APP_ORGANISAATIOHALLINTA" auth-disable="true"
                       type="text" name="lakkautuspvm2" uib-tooltip="{{t('Organisaationmuokkaus.ohje.aloitamuokkaus')}}"
                       datetext noedit ng-click="openVoimassaolonMuokkaus(false)" ng-model="model.organisaatio.lakkautusPvm"
                       ie-placeholder placeholder="{{t('Organisaationmuokkaus.lakkautuspvm')}}" >
                <!-- toimipiste ja muut, voimassaolo-popup-->
                <input ng-disabled="!model.aliorganisaatioTiedotHaettu && model.mode !== 'new'"
                       ng-show="model.hasAliorganisaatios && model.mode !== 'new'"
                       ng-if="model.isKoulutustoimija() === false && model.isOppilaitos() === false" oph-enter
                       type="text" name="lakkautuspvm2" uib-tooltip="{{t('Organisaationmuokkaus.ohje.aloitamuokkaus')}}"
                       datetext noedit ng-click="openVoimassaolonMuokkaus(false)" ng-model="model.organisaatio.lakkautusPvm"
                       ie-placeholder placeholder="{{t('Organisaationmuokkaus.lakkautuspvm')}}" >
                <!-- koulutustoimija ja oppilaitos, datepicker-->
                <input ng-if="(model.isKoulutustoimija() || model.isOppilaitos())
                       && (!model.hasAliorganisaatios || model.mode === 'new')"
                       auth="updateOph" auth-service="APP_ORGANISAATIOHALLINTA" auth-disable="true" oph-enter
                       type="text" name="lakkautuspvm" formatteddate uib-datepicker-popup="dd.MM.yyyy"
                       is-open="dpOpen3" ng-click="dpOpen3=true" min="'1900-01-01'" max="'2030-12-31'"
                       ng-model="model.organisaatio.lakkautusPvm"
                       close-on-date-selection="true" ie-placeholder placeholder="{{t('Organisaationmuokkaus.lakkautuspvm')}}"
                       close-text="{{t('Organisaationmuokkaus.sulje')}}"
                       current-text="{{t('Organisaationmuokkaus.tanaan')}}"
                       clear-text="{{t('Organisaationmuokkaus.tyhjenna')}}"
                       toggle-weeks-text="{{t('Organisaationmuokkaus.viikkonumerot')}}" />
                <!-- toimipiste ja muut, datepicker-->
                <input ng-disabled="!model.aliorganisaatioTiedotHaettu && model.mode !== 'new'"
                       ng-if="model.isKoulutustoimija() === false && model.isOppilaitos() === false
                       && !(model.hasAliorganisaatios && model.mode !== 'new')"
                       type="text" name="lakkautuspvm" formatteddate uib-datepicker-popup="dd.MM.yyyy" oph-enter
                       is-open="dpOpen4" ng-click="dpOpen4=true" min="'1900-01-01'" max="'2030-12-31'"
                       ng-model="model.organisaatio.lakkautusPvm"
                       close-on-date-selection="true" ie-placeholder placeholder="{{t('Organisaationmuokkaus.lakkautuspvm')}}"
                       close-text="{{t('Organisaationmuokkaus.sulje')}}"
                       current-text="{{t('Organisaationmuokkaus.tanaan')}}"
                       clear-text="{{t('Organisaationmuokkaus.tyhjenna')}}"
                       toggle-weeks-text="{{t('Organisaationmuokkaus.viikkonumerot')}}" />
            </div>
            <div>
                <em class="muted" tt="Organisaationmuokkaus.ohje.alkupvm">Alkupvm</em>
            </div>
            <div ng-show="model.muutettaviaAliorganisaatioita">
                {{'Organisaationmuokkaus.voimassaolo.info' | i18n: [model.muutettaviaAliorganisaatioita]}}
            </div>
            <div>
                <span class="text-error" ng-show="form.luontipvm.$error.required || form.luontipvm.$error.date">
                    {{t('Organisaationmuokkaus.validointi.alkupvm')}}. </span>
                <span class="text-error" ng-show="form.lakkautuspvm.$error.date">
                    {{t('Organisaationmuokkaus.validointi.loppupvm')}}</span>
                <span class="text-error" ng-show="form.luontipvm.$error.dateYear">
                    {{t('Organisaationmuokkaus.validointi.alkupvmvuosi')}}. </span>
                <span class="text-error" ng-show="form.lakkautuspvm.$error.dateYear">
                    {{t('Organisaationmuokkaus.validointi.loppupvmvuosi')}}</span>

                <span class="text-error" ng-show="form.$error.organisaationVoimassaolo">
                    {{t('Organisaationmuokkaus.validointi.voimassaolo')}}</span>
                <span class="text-error" ng-show="form.$error.aliorganisaationVoimassaolo">
                    {{t('Organisaationmuokkaus.validointi.aliorganisaationVoimassaolo')}}</span>
            </div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label">
            {{t('Organisaationtarkastelu.kotipaikka')}}*
        </label>
        <div class="controls">
            <select id="kotipaikka" ng-model="model.organisaatio.kotipaikkaUri" class="span6"
                    ng-options="kp.uri as kp.nimi for kp in model.koodisto.kotipaikat | orderBy:'nimi'" required>
                <option value="" tt="Organisaationmuokkaus.valitse">Valitse</option>
            </select>
            <div ng-if="!model.organisaatio.kotipaikkaUri">
                <input type="hidden" name="kotipaikka" ng-model="kotipaikka" required>
                <span class="text-error" ng-show="form.kotipaikka.$error.required">
                    {{t('Organisaationtarkastelu.kotipaikka')}}
                    {{t('Organisaationmuokkaus.validointi.pakollinen')}}
                </span>
            </div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label">
            {{t('Organisaationtarkastelu.maa')}}*
        </label>
        <div class="controls">
            <select id="maa" ng-model="model.organisaatio.maaUri"
                    ng-options="maa.uri as maa.nimi for maa in model.koodisto.maat | orderBy:'nimi'" required>
                <option value="" tt="Organisaationmuokkaus.valitse">Valitse</option>
            </select>
            <div>
                <em class="muted" tt="Organisaationmuokkaus.ohje.maa">Maa</em>
            </div>
            <div ng-if="!model.organisaatio.maaUri">
                <input type="hidden" name="maa" ng-model="maa" required>
                <span class="text-error" ng-show="form.maa.$error.required">
                    {{t('Organisaationtarkastelu.maa')}}
                    {{t('Organisaationmuokkaus.validointi.pakollinen')}}
                </span>
            </div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label">
            {{t('Organisaationtarkastelu.kieli')}}*
        </label>
        <div class="controls">
            <span ng-repeat="kieli in model.organisaatio.kieletUris">
                <button type="button" class="btn btn-small" ng-click="model.removeLang(kieli, ytform);
                            form.$dirty = true">{{model.uriLocalizedNames[kieli]}}&nbsp;<i class="icon-remove"></i></button>
            </span>
            <select id="maa" ng-model="model.koodisto.kieliplaceholder"
                    ng-options="kieli.uri as kieli.nimi for kieli in model.koodisto.opetuskielet | orderBy:'nimi'" ng-required="false"
                    ng-click="model.addLang(form.yhteystiedot)">
                <option value="" tt="Organisaationmuokkaus.lisaakieli">Lisää kieli</option>
            </select>
            <div ng-if="model.organisaatio.kieletUris.length === 0">
                <input type="hidden" name="kieli" ng-model="kieli" required>
                <span class="text-error" ng-show="form.kieli.$error.required">
                    {{t('Organisaationtarkastelu.kieli')}}
                    {{t('Organisaationmuokkaus.validointi.pakollinen')}}
                </span>
            </div>
        </div>
    </div>

    <div class="control-group" ng-if="model.isVarhaiskasvatuksenToimipaikka()">
        <label class="control-label">
            {{:: t('Organisaationtarkastelu.varhaiskasvatuksentoimipaikkatiedot')}}*
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                <div data-ng-include data-src="'varhaiskasvatuksentoimipaikkatietojenmuokkaus.html'">
                </div>
            </label>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" tt="Organisaationtarkastelu.kuva">
            Kuva
        </label>
        <div class="controls">
            <div ng-show="model.organisaatio.metadata.kuvaEncoded">
                <img ng-src="data:image/jpeg;base64, {{model.organisaatio.metadata.kuvaEncoded}}">
                <div>&nbsp;</div>
            </div>
            <div ng-controller="UploadController">
                <label ng-show="model.organisaatio.metadata.kuvaEncoded" for="upload" class="btn" style="text-align: center"
                       tt="Organisaationmuokkaus.vaihdakuva">Vaihda kuva</label>
                <label ng-hide="model.organisaatio.metadata.kuvaEncoded" for="upload" class="btn" style="text-align: center">
                    <i class="icon-plus"></i> {{ t('Organisaationmuokkaus.lisaakuva')}}</label>
                <input style="display: none;" ng-if="canUseFileReader" type="file" name="upload" id="upload" file-dirty
                       ng-model="model.imagefile" ng-file-select="onFileSelect($files)">
                <input style="display: none;" ng-if="!canUseFileReader" id="upload" type="file" name="upload" data-url="" oph-fileupload>
                <button ng-show="model.organisaatio.metadata.kuvaEncoded" type="button" class="btn"
                        ng-click="form.$setDirty(); model.removeImage(form)">
                    <i class="icon-remove"></i> {{ t('Organisaationmuokkaus.poistakuva')}}</button>
            </div>
        </div>
    </div>

    <hr>

    <!-- YHTEYSTIEDOT --->

    <div class="row">
        <div class="span4">
            <div class="view-row-label">
                <a href="" ng-model="ytexpanded" ng-click="ytexpanded = !ytexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':ytexpanded, 'icon-chevron-right':!ytexpanded}"></span>
                        {{t('Organisaationmuokkaus.yhteystiedot')}}
                    </label>
                </a>
            </div>
            <span class="text-error span4" ng-show="(form.yhteystiedot.$invalid || model.ytinvalid.length>0)
            && model.yhteystiedot.postinumerot">
                {{t('Organisaationmuokkaus.validation.osio')}}<br>
            </span>
        </div>
    </div>

    <div ng-show="ytexpanded" ng-form="yhteystiedot">
        <div data-ng-include data-src="'yhteystietojenmuokkaus.html'"></div>
    </div>

    <!-- LISÄYHTEYSTIEDOT -->

    <div ng-repeat="(ytoid, langs) in model.lisayhteystiedot" ng-init="ltexpanded = {};">
        <div class="row">
            <div class="span4">
                <div class="view-row-label">
                    <a href="" ng-model="ltexpanded[ytoid]" ng-click="ltexpanded[ytoid] = !ltexpanded[ytoid]">
                        <label>
                            <span ng-class="{'icon-chevron-down':ltexpanded[ytoid], 'icon-chevron-right':!ltexpanded[ytoid]}"></span> {{model.uriLocalizedNames[ytoid]}}
                        </label>
                    </a>
                </div>
                <span class="text-error span4" ng-show="form['lisayhteystiedotForm_' + ytoid].$invalid">
                    {{t('Organisaationmuokkaus.validation.osio')}}<br>
                </span>
            </div>
        </div>

        <div ng-show="ltexpanded[ytoid]" ng-init="model.ltlang = {}" ng-form dynamic-name-prefix='lisayhteystiedotForm' dynamic-name="ytoid">
            <uib-tabset>
                <uib-tab ng-repeat="lttab in model.lttabs"
                         heading="{{model.uriLocalizedNames[lttab]}}"
                         select="model.ltlang[ytoid]=lttab">
                </uib-tab>
            </uib-tabset>
            <div class="control-group" ng-repeat="yt in model.lisayhteystiedot[ytoid][model.ltlang[ytoid]]" ng-form="ytForm">
                <label class="control-label">
                    {{model.uriLocalizedNames[yt['YhteystietoElementti.oid']]}}{{yt["YhteystietoElementti.pakollinen"] && yt["YhteystietoElementti.pakollinen"]!=="false"?"*":""}}
                </label>
                <div class="controls">
                    <input type="text" dynamic-name="yt['YhteystietoElementti.oid']" dynamic-name-prefix="name" class="span6" oph-null-if-zero-length oph-enter
                           ng-model="yt['YhteystietoArvo.arvoText']" ng-required="yt['YhteystietoElementti.pakollinen'] && yt['YhteystietoElementti.pakollinen']!=='false'">
                    <div>
                        <span class="text-error" ng-show="ytForm['name_'+ yt['YhteystietoElementti.oid']].$error.required">
                            {{model.uriLocalizedNames[yt['YhteystietoElementti.oid']]}}
                            {{t('Organisaationmuokkaus.validointi.pakollinen')}}
                        </span>
                    </div>

                </div>
            </div>
        </div> <!-- ltexpanded -->
    </div>

    <!-- HAKIJAPALVELUT --->

    <div class="row">
        <div class="span4">
            <div class="view-row-label">
                <a href="" ng-model="hpexpanded" ng-click="hpexpanded = !hpexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':hpexpanded, 'icon-chevron-right':!hpexpanded}"></span>
                        {{t('Organisaationmuokkaus.hakijapalvelut')}}
                    </label>
                </a>
                <span class="text-error span4" ng-show="form.hakijapalvelut.$invalid">
                    {{t('Organisaationmuokkaus.validation.osio')}}<br>
                </span>
            </div>
        </div>
    </div>

    <div ng-show="hpexpanded" ng-form="hakijapalvelut">
        <div data-ng-include data-src="'hakijapalvelujenmuokkaus.html'"></div>
    </div>

    <!-- ECTS-KOORDINAATTORI --->

    <div class="row">
        <div class="span4">
            <div>
                <a href="" ng-model="ectsexpanded" ng-click="ectsexpanded = !ectsexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':ectsexpanded, 'icon-chevron-right':!ectsexpanded}"></span>
                        {{t('Organisaationtarkastelu.hakutoimistoectsnimi')}}
                    </label>
                </a>
            </div>
            <span class="text-error span4" ng-show="form.hakutoimistoectsnimi.$invalid">
                {{t('Organisaationmuokkaus.validation.osio')}}<br>
            </span>
        </div>
    </div>

    <div ng-show="ectsexpanded" ng-form="hakutoimistoectsnimi">
        <uib-tabset>
            <uib-tab select="model.ectslang='+'">
                <uib-tab-heading>
                    <span class="icon-plus-sign"></span>
                </uib-tab-heading>
            </uib-tab>
            <uib-tab ng-repeat="tab in model.mkSections.ects.tabs"
                     active="tab.active"
                     select="model.ectslang=tab.lang">
                <uib-tab-heading>
                    {{model.uriLocalizedNames[tab.lang]}} <a ng-click="model.removeMkLang('ects', $index)" href=''><span class='icon-remove'>&nbsp;</span></a>
                </uib-tab-heading>
            </uib-tab>
        </uib-tabset>
        <div ng-if="model.ectslang === '+'">
            <div class="control-group">
                <select id="maa" ng-model="model.mkSections.ects.placeholder"
                        ng-options="kieli.uri as kieli.nimi for kieli in model.koodisto.isokielet | orderBy:'nimi'" ng-required="false"
                        ng-click="model.addMkLang('ects')">
                    <option value="" tt="Organisaationmuokkaus.lisaakieli">Lisää kieli</option>
                </select>
            </div>
        </div>
        <div ng-show="model.ectslang !== '+'" ng-repeat='tab in model.mkSections.ects.tabs'>
            <div ng-show='tab.lang === model.ectslang'>
                <div class="control-group">
                    <label class="control-label" tt="Organisaationmuokkaus.hakutoimistoectsnimi">
                        hakutoimistoectsnimi
                    </label>
                    <div class="controls">
                        <input id="ectsnimi" name="ectsnimi" type="text" ng-model="model.organisaatio.metadata.hakutoimistoEctsNimi[model.ectslang]" class="span6"
                               uib-typeahead="hlo.nimi for hlo in model.henkilot.virkailijat | filter:$viewValue | limitTo:10"
                               typeahead-on-select="model.setEctsNimi($item)" oph-enter>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" tt="Organisaationmuokkaus.hakutoimistoectstehtavanimike">
                        hakutoimistoectstetavanimike
                    </label>
                    <div class="controls">
                        <input id="ectsnimike" type="text" name="ectsnimike" class="span6"
                               ng-model="model.organisaatio.metadata.hakutoimistoEctsTehtavanimike[model.ectslang]"
                               ng-maxlength="255" oph-enter
                               ng-required="false"/>
                        <div>
                            <span class="text-error" ng-show="hakutoimistoectsnimi.ectsnimike.$error.maxlength"
                                  tt="Organisaationmuokkaus.validation.maxpituus255">
                                max pituus 255 merkkiä
                            </span>
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" tt="Organisaationmuokkaus.hakutoimistoectspuhelin">
                        hakutoimistoectspuhelin
                    </label>
                    <div class="controls">
                        <input id="ectspuhelin" type="text" name="ectspuhelin" oph-enter
                               ng-model="model.organisaatio.metadata.hakutoimistoEctsPuhelin[model.ectslang]"
                               ng-required="false" oph-null-if-zero-length oph-pattern="^[\d \-\+]*$"/>
                        <div>
                            <span class="text-error" ng-show="hakutoimistoectsnimi.ectspuhelin.$error.ophPattern">
                                {{t('Organisaationtarkastelu.puhelinnumero')}}
                                {{t('Organisaationmuokkaus.validointi.virheellinen')}}
                            </span>
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" tt="Organisaationmuokkaus.hakutoimistoectsemail">
                        Organisaationmuokkaus.hakutoimistoectsemail
                    </label>
                    <div class="controls">
                        <div>
                            <input id="ectsemail" type="email" name="ectsemail" class="span6" maxlength="255" oph-enter
                                   ng-model="model.organisaatio.metadata.hakutoimistoEctsEmail[model.ectslang]"
                                   ng-required="false" oph-null-if-zero-length/>
                            <span class="text-error" ng-show="hakutoimistoectsnimi.ectsemail.$error.email">
                                {{t('Organisaationtarkastelu.sahkopostiosoite')}}
                                {{t('Organisaationmuokkaus.validointi.virheellinen')}}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
    </div> <!-- ectsexpanded -->

    <!-- SOSIAALINEN MEDIA --->

    <div class="row">
        <div class="span4">
            <div>
                <a href="" ng-model="someexpanded" ng-click="someexpanded = !someexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':someexpanded, 'icon-chevron-right':!someexpanded}"></span>
                        {{t('Organisaationtarkastelu.sosiaalinenmedia')}}
                    </label>
                </a>
            </div>
            <span class="text-error span4" ng-show="form.sosiaalinenmedia.$invalid">
                {{t('Organisaationmuokkaus.validation.osio')}}<br>
            </span>
        </div>
    </div>

    <div ng-show="someexpanded" ng-form="sosiaalinenmedia">
        <uib-tabset>
            <uib-tab select="model.smlang='+'">
                <uib-tab-heading>
                    <span class="icon-plus-sign"></span>
                </uib-tab-heading>
            </uib-tab>
            <uib-tab ng-repeat="tab in model.mkSections.sm.tabs"
                     active="tab.active"
                     select="model.smlang=tab.lang">
                <uib-tab-heading>
                    {{model.uriLocalizedNames[tab.lang]}} <a ng-click="model.removeMkLang('sm', $index)" href=''><span class='icon-remove'>&nbsp;</span></a>
                </uib-tab-heading>
            </uib-tab>
        </uib-tabset>
        <div ng-if="model.smlang === '+'">
            <div class="control-group">
                <select id="maa" ng-model="model.mkSections.sm.placeholder"
                        ng-options="kieli.uri as kieli.nimi for kieli in model.koodisto.isokielet | orderBy:'nimi'" ng-required="false"
                        ng-click="model.addMkLang('sm')">
                    <option value="" tt="Organisaationmuokkaus.lisaakieli">Organisaationmuokkaus.lisaakieli</option>
                </select>
            </div>
        </div>
        <div ng-if="model.smlang !== '+'" ng-repeat='tab in model.mkSections.sm.tabs'>
            <div ng-if='tab.lang === model.smlang'>
                <div class="control-group">
                    <label class="control-label" tt="Organisaationtarkastelu.sosiaalinenmedia">
                        Organisaationtarkastelu.sosiaalinenmedia
                    </label>
                    <div class="controls">
                        <select id="some" ng-model="model.someplaceholder"
                                ng-options="some.type as some.nimi for some in model.some | orderBy:'some.nimi'" ng-required="false"
                                ng-click="model.addSome()">
                            <option value="" tt="Organisaationmuokkaus.lisaasosiaalinenmedia">Organisaationmuokkaus.lisaasosiaalinenmedia</option>
                        </select>

                        <div class="control-group" ng-repeat="field in model.sometypes" ng-form="someForm"
                             ng-if="model.organisaatio.metadata.data[field].hasOwnProperty(model.smlang)">
                            <br/>{{model.someurls[field].nimi}}:<br/>
                            <div class="input-append">
                                <input id="somein" type="text" name="somein" class="span6" oph-enter
                                       oph-pattern="{{model.someurls[field].validator}}"
                                       ng-focus="model.organisaatio.metadata.data[field][model.smlang] = model.someurls[field].autofill"
                                       ng-model="model.organisaatio.metadata.data[field][model.smlang]"
                                       ie-placeholder placeholder="{{model.someurls[field].autofill}}" required>
                                <!--onclick="if (!value && placeholder) value = placeholder" -->
                                <button type="button" class="btn" ng-click="model.removeSome(field)"><i class="icon-remove"></i></button>
                            </div>
                            <div>
                                <span class="text-error" ng-show="someForm.somein.$error.ophPattern
                                || someForm.somein.$error.required" tt="Organisaationmuokkaus.validation.some">
                                    Organisaationmuokkaus.validation.some
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
    </div> <!-- someexpanded -->


    <!-- ORGANISAATION ESITTELY --->

    <div class="row">
        <div class="span4">
            <div>
                <a href="" ng-model="oesexpanded" ng-click="oesexpanded = !oesexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':oesexpanded, 'icon-chevron-right':!oesexpanded}"></span>
                        {{t('Organisaationtarkastelu.koulutustarjoajatiedot')}}
                    </label>
                </a>
            </div>
        </div>
    </div>

    <div ng-show="oesexpanded">

        <div class="control-group" ng-if="!model.isKoulutustoimija()">
            <div>
                <button type="button" class="btn" ng-click="vahvistakopiointi('kt')"
                        uib-tooltip="{{t('Organisaationmuokkaus.ohje.kopioitiedot')}}
                        {{model.uriLocalizedNames['parentnimi']}}.">
                    <i class="icon-copy"></i>{{t('Organisaationmuokkaus.kopioitiedot')}}
                </button>
            </div>
        </div>

        <uib-tabset>
            <uib-tab select="model.ktlang='+'">
                <uib-tab-heading>
                    <span uib-dropdown>
                        <span class="icon-plus-sign" uib-dropdown-toggle></span>
                        <ul ng-if="true" uib-dropdown-menu style="text-decoration: none">
                            <li
                                    ng-repeat="kieli in model.koodisto.isokielet| orderBy:'nimi'">
                                <a href="" ng-click="model.mkSections.kt.placeholder = kieli.uri;
                                            model.addMkLang('kt')">{{kieli.nimi}}</a>
                            </li>
                        </ul>
                    </span>
                </uib-tab-heading>
            </uib-tab>
            <uib-tab ng-repeat="tab in model.mkSections.kt.tabs"
                     active="tab.active"
                     select="model.ktlang=tab.lang">
                <uib-tab-heading>
                    {{model.uriLocalizedNames[tab.lang]}} <a ng-click="model.removeMkLang('kt', $index)" href=''><span class='icon-remove'>&nbsp;</span></a>
                </uib-tab-heading>
            </uib-tab>
        </uib-tabset>
        <div ng-if="model.ktlang === '+'">
            <div class="control-group">
                <select id="maa" ng-model="model.mkSections.kt.placeholder"
                        ng-options="kieli.uri as kieli.nimi for kieli in model.koodisto.isokielet | orderBy:'nimi'" ng-required="false"
                        ng-click="model.addMkLang('kt')">
                    <option value="" tt="Organisaationmuokkaus.lisaakieli">Organisaationmuokkaus.lisaakieli</option>
                </select>
            </div>
        </div>
        <div ng-if="model.ktlang !== '+'" ng-repeat='tab in model.mkSections.kt.tabs'>
            <div ng-if='tab.lang === model.ktlang'>

                <div class="control-group" ng-repeat="field in model.kttypes" ng-form="ktForm">
                    <label class="control-label">
                        {{t('Organisaationtarkastelu.' + field)}}
                    </label>
                    <div class="controls">
                        <em class="muted">{{t('Organisaationmuokkaus.ohje.' + field)}}</em>
                    </div>
                    <div class="controls">
                        <div class="well" uib-tooltip="{{t('Organisaationmuokkaus.ohje.aloitamuokkaus')}}" style="height:70px; overflow:auto"
                             ng-click="openEditor(field, model.ktlang, model.getUserLang());" name="mcearea_kt"
                             ng-bind-html="model.organisaatio.metadata.data[field][model.ktlang]"></div>
                        <div>
                            <span class="text-error" ng-show="model.organisaatio.metadata.data[field][model.ktlang]
                            && model.organisaatio.metadata.data[field][model.ktlang].length > 16383">
                                {{t('Organisaationmuokkaus.validation.maxpituusalku')}}
                                {{model.organisaatio.metadata.data[field][model.ktlang].length}}
                                {{t('Organisaationmuokkaus.validation.maxpituusloppu')}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr>
    </div> <!-- oesexpanded -->

    <div class="view-row"></div>

    <!-- OPISKELIJAN EDUT -->

    <div class="row">
        <div class="span4">
            <div class="view-row-label">
                <a href="" ng-model="oeexpanded" ng-click="oeexpanded = !oeexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':oeexpanded, 'icon-chevron-right':!oeexpanded}"></span>
                        {{t('Organisaationtarkastelu.opiskelijanedut')}}
                    </label>
                </a>
            </div>
        </div>
    </div>

    <div ng-show="oeexpanded">

        <div class="control-group">
            <div>
                <em class="muted" tt="Organisaationmuokkaus.ohje.palvelutoppijalle">Organisaationmuokkaus.ohje.palvelutoppijalle</em>
            </div>

            <div ng-if="!model.isKoulutustoimija()">
                <button type="button" class="btn" ng-click="vahvistakopiointi('oe')"
                        uib-tooltip="{{t('Organisaationmuokkaus.ohje.kopioitiedot')}} {{model.uriLocalizedNames['parentnimi']}}.">
                    <i class="icon-copy"></i>{{t('Organisaationmuokkaus.kopioitiedot')}}</button>
            </div>

        </div>

        <uib-tabset>
            <uib-tab select="model.oelang='+'">
                <uib-tab-heading>
                    <span uib-dropdown>
                        <span class="icon-plus-sign" uib-dropdown-toggle></span>
                        <ul ng-if="true" uib-dropdown-menu style="text-decoration: none">
                            <li
                                    ng-repeat="kieli in model.koodisto.isokielet| orderBy:'nimi'">
                                <a href="" ng-click="model.mkSections.oe.placeholder = kieli.uri;
                                            model.addMkLang('oe')">{{kieli.nimi}}</a>
                            </li>
                        </ul>
                    </span>
                </uib-tab-heading>
            </uib-tab>
            <uib-tab ng-repeat="tab in model.mkSections.oe.tabs"
                     active="tab.active"
                     select="model.oelang=tab.lang">
                <uib-tab-heading>
                    {{model.uriLocalizedNames[tab.lang]}} <a ng-click="model.removeMkLang('oe', $index)" href=''><span class='icon-remove'>&nbsp;</span></a>
                </uib-tab-heading>
            </uib-tab>
        </uib-tabset>

        <div ng-if="model.oelang === '+'">
            <div class="control-group">
                <select id="maa" ng-model="model.mkSections.oe.placeholder"
                        ng-options="kieli.uri as kieli.nimi for kieli in model.koodisto.isokielet | orderBy:'nimi'" ng-required="false"
                        ng-click="model.addMkLang('oe')">
                    <option value="" tt="Organisaationmuokkaus.lisaakieli">Organisaationmuokkaus.lisaakieli</option>
                </select>
            </div>
        </div>

        <div ng-if="model.oelang !== '+'" ng-repeat='tab in model.mkSections.oe.tabs'>
            <div ng-if='tab.lang === model.oelang'>

                <div class="control-group" ng-repeat="field in model.oetypes" ng-form="oeForm">
                    <label class="control-label">
                        {{t('Organisaationtarkastelu.' + field)}}
                    </label>
                    <div class="controls">
                        <em class="muted">{{t('Organisaationmuokkaus.ohje.' + field)}}</em>
                    </div>
                    <div class="controls">
                        <div class="well" uib-tooltip="{{t('Organisaationmuokkaus.ohje.aloitamuokkaus')}}" style="height:70px; overflow:auto"
                             ng-click="openEditor(field, model.oelang, model.getUserLang());" name="mcearea_oe"
                             ng-bind-html="model.organisaatio.metadata.data[field][model.oelang]"></div>
                        <div>
                            <span class="text-error" ng-show="model.organisaatio.metadata.data[field][model.oelang] && model.organisaatio.metadata.data[field][model.oelang].length > 16383">
                                {{t('Organisaationmuokkaus.validation.maxpituusalku')}}
                                {{model.organisaatio.metadata.data[field][model.oelang].length}}
                                {{t('Organisaationmuokkaus.validation.maxpituusloppu')}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr>
    </div> <!-- oeexpanded -->



    <div class="row">&nbsp;</div>
    <div class="row">&nbsp;</div>
</form>
<!-- Fixed footer ei näytä hyvältä virkailija framessa...
<div class="view-row fixed-footer" ng-show="model.organisaatio.nimi">
    <hr>
    <br>
    <div class="align-right margin-right-10">
        <button type="button" class="button small" ng-click="cancel()">{{t('Organisaationmuokkaus.peruuta')}}</button>
        <button type="button" class="button small" ng-click="save()">{{t('Organisaationmuokkaus.tallenna')}}</button>
    </div>
    <p>
</div>
-->

<div class="row fixed-footer" ng-if="modalOpen === false" ng-hide="isLoading()">
    <div ng-show="model.mode === 'edit'">
        <div class="align-right ">
            <button type="button" class="btn" ng-click="cancel()" uib-tooltip="{{t('Organisaatiot.ohje.palaahakuun')}}">
                <i class="icon-arrow-left"></i>
            </button>
            <button type="button" class="btn" ng-disabled="form.$invalid || model.ytinvalid.length>0" ng-click="view()"
                    uib-tooltip="{{t('Organisaatiot.tarkastele')}}">
                <i class="icon-eye-open"></i> {{t('Organisaatiot.tarkastele')}}
            </button>
            <button type="button" ng-disabled="!form.$dirty || form.$invalid || model.ytinvalid.length>0"
                    auth="updateOrg" auth-service="APP_ORGANISAATIOHALLINTA" auth-org="{{model.organisaatio.oid}}"
                    class="btn btn-primary" ng-click="saveAndRefresh()" uib-tooltip="{{t('Organisaationmuokkaus.tallenna')}}">
                {{t('Organisaationmuokkaus.tallenna')}}
            </button>
        </div>
        <span ng-if="!form.$invalid && model.ytinvalid.length===0" class="muted" style="background-color: #fff"><em>{{model.savestatus}}</em></span>
        <span ng-if="form.$invalid || model.ytinvalid.length>0" class="muted" style="background-color: #fff; color: #f00">
            <em ng-mouseenter="listErrors()" uib-tooltip-html-unsafe='{{model.errorsTooltip}}' tt="Organisaationmuokkaus.validation.lomake">
                Organisaationmuokkaus.validation.lomake
            </em>
        </span>
    </div>
    <div ng-show="model.mode === 'new'">
        <div class="align-right ">
            <button type="button" class="btn" ng-click="cancel()" uib-tooltip="{{t('Organisaatiot.ohje.palaahakuun')}}">
                <i class="icon-arrow-left"></i>
            </button>
            <button type="button" class="btn" ng-disabled="form.$invalid || model.ytinvalid.length>0" ng-click="view()"
                    uib-tooltip="{{t('Organisaatiot.tarkastele')}}">
                <i class="icon-eye-open"></i> {{t('Organisaatiot.tarkastele')}}
            </button>
            <button type="button" ng-disabled="!form.$dirty || form.$invalid || model.ytinvalid.length>0" auth="crudOrg"
                    auth-service="APP_ORGANISAATIOHALLINTA" auth-org="{{model.organisaatio.parentOid}}"
                    class="btn btn-primary" ng-click="save()" uib-tooltip="{{t('Organisaationmuokkaus.tallenna')}}">
                {{t('Organisaationmuokkaus.tallenna')}}
            </button>
        </div>
        <span ng-if="!form.$invalid && model.ytinvalid.length===0" class="muted" style="background-color: #fff"><em>{{model.savestatus}}</em></span>
        <span ng-if="form.$invalid || model.ytinvalid.length>0" class="muted" style="background-color: #fff; color: #f00">
            <em ng-mouseenter="listErrors()" uib-tooltip-html-unsafe='{{model.errorsTooltip}}' tt="Organisaationmuokkaus.validation.lomake">
                Organisaationmuokkaus.validation.lomake
            </em>
        </span>
    </div>
    <p>
</div>