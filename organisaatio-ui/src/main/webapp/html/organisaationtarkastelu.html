<form name="form" class="form-horizontal" novalidate>

    <div class="control-group">
        <div class="offset2 span6" ng-show="model.organisaatio.nimi">
            <h2>{{model.uriLocalizedNames["nimi"]}}
                <button type="button" class="btn-primary" ng-click="edit()"
                        auth="updateOrg" auth-service="APP_ORGANISAATIOHALLINTA" auth-org="{{model.organisaatio.oid}}">
                    {{'Organisaationtarkastelu.muokkaa'| i18n}}
                </button>
            </h2>
        </div>
    </div>

    <div ng-show="model.organisaatio.metadata.kuvaEncoded">
        <img class="absolute offset8 span4" ng-src="data:image/jpeg;base64, {{model.organisaatio.metadata.kuvaEncoded}}">
    </div>

    <div class="control-group" ng-show="model.organisaatio.tyypit">
        <label class="control-label">
            {{'Organisaationtarkastelu.organisaatiotyyppi'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                <div ng-repeat="tyyppi in model.organisaatio.tyypit">
                    {{tyyppi}}<br>
                </div>
            </label>
        </div>
    </div>


    <div class="control-group" ng-show="model.organisaatio.nimi">
        <label class="control-label">{{'Organisaationtarkastelu.nimi'| i18n}}</label>
        <div class="controls">
            <label class="control-label control-label-left">
                <div ng-repeat="(avain, arvo) in model.organisaatio.nimi">
                    {{arvo}} [{{avain}}]<br>
                </div>
            </label>
        </div>
    </div>

    <div class="control-group" ng-show="model.organisaatio.alkuPvm">
        <label class="control-label">
            {{'Organisaationtarkastelu.voimassaolo'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                {{model.organisaatio.alkuPvm| date:'dd.MM.yyyy'}} - {{model.organisaatio.lakkautusPvm| date:'dd.MM.yyyy'}}
            </label>
        </div>
    </div>

    <div class="control-group" ng-show="model.organisaatio.kotipaikkaUri">
        <label class="control-label">
            {{'Organisaationtarkastelu.kotipaikka'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                {{model.uriLocalizedNames[model.organisaatio.kotipaikkaUri]}}
            </label>
        </div>
    </div>

    <div class="control-group" ng-show="model.organisaatio.yritysmuoto">
        <label class="control-label">
            {{'Organisaationtarkastelu.yritysmuoto'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                {{model.organisaatio.yritysmuoto}}
            </label>
        </div>
    </div>

    <div class="control-group" ng-show="model.organisaatio.yritysmuoto" ng-if='model.isKoulutustoimija()'>
        <label class="control-label">
            {{'Organisaationtarkastelu.yritysmuoto'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                {{model.organisaatio.yritysmuoto}}
            </label>
        </div>
    </div>

    <div class="control-group" ng-show="model.organisaatio.ytunnus" ng-if='model.isKoulutustoimija()'>
        <label class="control-label">
            {{'Organisaationtarkastelu.ytunnus'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                {{model.organisaatio.ytunnus}}
            </label>
        </div>
    </div>

    <div class="control-group" ng-show="model.organisaatio.virastotunnus" ng-if='model.isKoulutustoimija()'>
        <label class="control-label">
            {{'Organisaationtarkastelu.virastotunnus'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                {{model.organisaatio.virastotunnus}}
            </label>
        </div>
    </div>

    <div class="control-group" ng-show="model.organisaatio.maaUri">
        <label class="control-label">
            {{'Organisaationtarkastelu.maa'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                {{model.uriLocalizedNames[model.organisaatio.maaUri]}}
            </label>
        </div>
    </div>


    <div class="control-group" ng-show="model.organisaatio.kieletUris">
        <label class="control-label">
            {{'Organisaationtarkastelu.kieli'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                <div ng-repeat="kieli in model.organisaatio.kieletUris">
                    {{model.uriLocalizedNames[kieli]}}<br>
                </div>
            </label>
        </div>
    </div>

    <div class="control-group" ng-show="model.organisaatio.oppilaitosKoodi" ng-if='model.isOppilaitos()'>
        <label class="control-label">
            {{'Organisaationtarkastelu.tkkoodi'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                {{model.organisaatio.oppilaitosKoodi}}
            </label>
        </div>
    </div>

    <div class="control-group" ng-show="model.organisaatio.oppilaitosTyyppiUri" ng-if='model.isOppilaitos()'>
        <label class="control-label">
            {{'Organisaationtarkastelu.oppilaitostyyppi'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                {{model.uriLocalizedNames[model.organisaatio.oppilaitosTyyppiUri]}}
            </label>
        </div>
    </div>

    <div class="control-group" ng-show="model.organisaatio.vuosiluokat" ng-if="model.hasVuosiluokat()">
        <label class="control-label">
            {{'Organisaationtarkastelu.vuosiluokat'| i18n}}
        </label>
        <div class="controls">
            <label class="control-label control-label-left">
                <div ng-repeat="vl in model.organisaatio.vuosiluokat">
                    {{model.uriLocalizedNames[vl]}}<br>
                </div>
            </label>
        </div>
    </div>

    <hr>

    <div class="row">
        <div class="span4">
            <div class="view-row-label">
                <a href="" ng-model="ytexpanded" ng-click="ytexpanded = !ytexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':ytexpanded, 'icon-chevron-right':!ytexpanded}"
                              ng-bind=""></span>
                        {{'Organisaationmuokkaus.yhteystiedot'| i18n}}
                    </label>
                </a>
            </div>
        </div>
    </div>

    <div ng-show="ytexpanded">

        <tabset>
            <tab ng-repeat="yttab in model.yttabs"
                 heading="{{model.uriLocalizedNames[yttab]}}"
                 select="model.ytlang=yttab">
            </tab>
        </tabset>

        <div class="control-group" ng-if="model.yhteystiedot[model.ytlang].kaynti.osoite || model.yhteystiedot[model.ytlang].kaynti.postinumeroUri">
            <div>
                <label class="control-label">
                    {{'Organisaationtarkastelu.kayntiosoite'| i18n}}
                </label>
                <div class="controls">
                    <label class="control-label control-label-left">
                        <span ng-if="model.yhteystiedot[model.ytlang].kaynti.osoite">{{model.yhteystiedot[model.ytlang].kaynti.osoite}}{{model.uriKoodit[model.yhteystiedot[model.ytlang].kaynti.postinumeroUri].koodiArvo?',':''}}</span>
                        {{model.uriKoodit[model.yhteystiedot[model.ytlang].kaynti.postinumeroUri].koodiArvo}}&nbsp;
                        {{model.uriLocalizedNames[model.yhteystiedot[model.ytlang].kaynti.postinumeroUri]}}
                    </label>
                </div>
            </div>
        </div>

        <div class="control-group" ng-if="model.yhteystiedot[model.ytlang].ulkomainen_kaynti.osoite">
            <div>
                <label class="control-label">
                    {{'Organisaationtarkastelu.kayntiosoite'| i18n}}
                </label>
                <div class="controls">
                    <label class="control-label control-label-left">
                        <pre ng-if="model.yhteystiedot[model.ytlang].ulkomainen_kaynti.osoite">{{model.yhteystiedot[model.ytlang].ulkomainen_kaynti.osoite}}</pre>
                    </label>
                </div>
            </div>
        </div>

        <div class="control-group" ng-if="model.yhteystiedot[model.ytlang].posti.osoite || model.yhteystiedot[model.ytlang].posti.postinumeroUri">
            <div>
                <label class="control-label">
                    {{'Organisaationtarkastelu.postiosoite'| i18n}}
                </label>
                <div class="controls">
                    <label class="control-label control-label-left">
                        <span ng-if="model.yhteystiedot[model.ytlang].posti.osoite">{{model.yhteystiedot[model.ytlang].posti.osoite}}{{model.uriKoodit[model.yhteystiedot[model.ytlang].posti.postinumeroUri].koodiArvo?',':''}}</span>
                        {{model.uriKoodit[model.yhteystiedot[model.ytlang].posti.postinumeroUri].koodiArvo}}&nbsp;
                        {{model.uriLocalizedNames[model.yhteystiedot[model.ytlang].posti.postinumeroUri]}}
                    </label>
                </div>
            </div>
        </div>

        <div class="control-group" ng-if="model.yhteystiedot[model.ytlang].ulkomainen_posti.osoite">
            <div>
                <label class="control-label">
                    {{'Organisaationtarkastelu.postiosoite'| i18n}}
                </label>
                <div class="controls">
                    <label class="control-label control-label-left">
                        <pre ng-if="model.yhteystiedot[model.ytlang].ulkomainen_posti.osoite">{{model.yhteystiedot[model.ytlang].ulkomainen_posti.osoite}}</pre>
                    </label>
                </div>
            </div>
        </div>

        <div class="control-group"ng-if="model.yhteystiedot[model.ytlang].puhelin.numero">
            <div>
                <label class="control-label">
                    {{'Organisaationtarkastelu.puhelinnumero'| i18n}}
                </label>
                <div class="controls">
                    <label class="control-label control-label-left">
                        {{model.yhteystiedot[model.ytlang].puhelin.numero}}
                    </label>
                </div>
            </div>
        </div>

        <div class="control-group" ng-if="model.yhteystiedot[model.ytlang].faksi.numero">
            <div>
                <label class="control-label">
                    {{'Organisaationtarkastelu.faksinumero'| i18n}}
                </label>
                <div class="controls">
                    <label class="control-label control-label-left">
                        {{model.yhteystiedot[model.ytlang].faksi.numero}}
                    </label>
                </div>
            </div>
        </div>

        <div class="control-group" ng-if="model.yhteystiedot[model.ytlang].www.www">
            <div>
                <label class="control-label">
                    {{'Organisaationtarkastelu.wwwosoite'| i18n}}
                </label>
                <div class="controls">
                    <label class="control-label control-label-left">
                        {{model.yhteystiedot[model.ytlang].www.www}}
                    </label>
                </div>
            </div>
        </div>

        <div class="control-group">
            <div>
                <label class="control-label" ng-if="model.yhteystiedot[model.ytlang].email.email">
                    {{'Organisaationtarkastelu.sahkopostiosoite'| i18n}}
                </label>
                <div class="controls">
                    <label class="control-label control-label-left">
                        {{model.yhteystiedot[model.ytlang].email.email}}
                    </label>
                </div>
            </div>
        </div>
        <hr>
    </div> <!-- ytexpanded -->

    <div ng-repeat="yta in model.lisayhteystietoarvos" ng-init="ltexpanded = {}; model.ltlang = {}">
        <div class="row">
            <div class="span4">
                <div class="view-row-label">
                    <a href="" ng-model="ltexpanded[yta.oid]" ng-click="ltexpanded[yta.oid] = !ltexpanded[yta.oid]">
                        <label>
                            <span ng-class="{'icon-chevron-down':ltexpanded[yta.oid], 'icon-chevron-right':!ltexpanded[yta.oid]}"
                                  ng-bind=""></span>
                            {{yta.nimi}}
                        </label>
                    </a>
                </div>
            </div>
        </div>

        <div ng-show="ltexpanded[yta.oid]">
            <tabset>
                <tab ng-repeat="lttab in model.lttabs"
                     heading="{{model.uriLocalizedNames[lttab]}}"
                     select="model.ltlang[yta.oid]=lttab">
                </tab>
            </tabset>

            <div class="control-group" ng-repeat="yt in model.organisaatio.yhteystietoArvos"
                 ng-show="yt['YhteystietojenTyyppi.oid'] === yta.oid && yt['YhteystietoArvo.kieli'] === model.ltlang[yta.oid]">
                <label class="control-label">
                    {{model.getLocalizedLisatietoElementtiNimi(yt)}}
                </label>
                <div class="controls">
                    <label class="control-label control-label-left">
                        {{yt['YhteystietoArvo.arvoText']}}
                    </label>
                </div>
            </div>
            <hr>
        </div> <!-- ltexpanded -->
    </div>

    <div class="row">
        <div class="span4">
            <div class="view-row-label">
                <a href="" ng-model="hpexpanded" ng-click="hpexpanded = !hpexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':hpexpanded, 'icon-chevron-right':!hpexpanded}"></span>
                        {{'Organisaationmuokkaus.hakijapalvelut'| i18n}}
                    </label>
                </a>
            </div>
        </div>
    </div>

    <div ng-show="hpexpanded">
        <tabset>
            <tab ng-repeat="tab in model.mkSections.hp.tabs"
                 active="tab.active"
                 select="model.hplang=tab.lang"
                 heading="{{model.uriLocalizedNames[tab.lang]}}">
            </tab>
        </tabset>


        <div class="control-group" ng-if="model.organisaatio.metadata.hakutoimistonNimi[model.hplang]">
            <label class="control-label">
                {{'Organisaationtarkastelu.hakutoimistonnimi'| i18n}}
            </label>
            <div class="controls">
                <label class="control-label control-label-left">
                    {{model.organisaatio.metadata.hakutoimistonNimi[model.hplang]}}
                </label>
            </div>
        </div>

        <div class="control-group" ng-if="model.mdyhteystiedot[model.hplang].kaynti.osoite || model.mdyhteystiedot[model.hplang].kaynti.postinumeroUri">
            <label class="control-label">
                {{'Organisaationtarkastelu.kayntiosoite'| i18n}}
            </label>
            <div class="controls">
                <label class="control-label control-label-left">
                    <span ng-if="model.mdyhteystiedot[model.hplang].kaynti.osoite">{{model.mdyhteystiedot[model.hplang].kaynti.osoite}},&nbsp;</span>
                    {{model.uriKoodit[model.mdyhteystiedot[model.hplang].kaynti.postinumeroUri].koodiArvo}}&nbsp;
                    {{model.uriLocalizedNames[model.mdyhteystiedot[model.hplang].kaynti.postinumeroUri]}}
                </label>
            </div>
        </div>

        <div class="control-group" ng-if="model.mdyhteystiedot[model.hplang].posti.osoite || model.mdyhteystiedot[model.hplang].posti.postinumeroUri">
            <label class="control-label">
                {{'Organisaationtarkastelu.postiosoite'| i18n}}
            </label>
            <div class="controls">
                <label class="control-label control-label-left">
                    <span ng-if="model.mdyhteystiedot[model.hplang].posti.osoite">{{model.mdyhteystiedot[model.hplang].posti.osoite}},&nbsp;</span>
                    {{model.uriKoodit[model.mdyhteystiedot[model.hplang].posti.postinumeroUri].koodiArvo}}&nbsp;
                    {{model.uriLocalizedNames[model.mdyhteystiedot[model.hplang].posti.postinumeroUri]}}
                </label>
            </div>
        </div>

        <div class="control-group" ng-if="model.mdyhteystiedot[model.hplang].puhelin.numero">
            <label class="control-label">
                {{'Organisaationtarkastelu.puhelinnumero'| i18n}}
            </label>
            <div class="controls">
                <label class="control-label control-label-left">
                    {{model.mdyhteystiedot[model.hplang].puhelin.numero}}
                </label>
            </div>
        </div>

        <div class="control-group" ng-if="model.mdyhteystiedot[model.hplang].faksi.numero">
            <label class="control-label">
                {{'Organisaationtarkastelu.faksinumero'| i18n}}
            </label>
            <div class="controls">
                <label class="control-label control-label-left">
                    {{model.mdyhteystiedot[model.hplang].faksi.numero}}
                </label>
            </div>
        </div>

        <div class="control-group" ng-if="model.mdyhteystiedot[model.hplang].email.email">
            <label class="control-label">
                {{'Organisaationtarkastelu.sahkopostiosoite'| i18n}}
            </label>
            <div class="controls">
                <label class="control-label control-label-left">
                    {{model.mdyhteystiedot[model.hplang].email.email}}
                </label>
            </div>
        </div>

        <div class="control-group" ng-if="model.mdyhteystiedot[model.hplang].www.www">
            <div>
                <label class="control-label">
                    {{'Organisaationtarkastelu.wwwosoite'| i18n}}
                </label>
                <div class="controls">
                    <label class="control-label control-label-left">
                        {{model.mdyhteystiedot[model.hplang].www.www}}
                    </label>
                </div>
            </div>
        </div>

        <hr>
    </div> <!-- hpexpanded -->

    <div class="row">
        <div class="span4">
            <div class="view-row-label">
                <a href="" ng-model="smexpanded" ng-click="smexpanded = !smexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':smexpanded, 'icon-chevron-right':!smexpanded}"></span>
                        {{'Organisaationtarkastelu.sosiaalinenmedia'| i18n}}
                    </label>
                </a>
            </div>
        </div>
    </div>

    <div ng-show="smexpanded">

        <tabset>
            <tab ng-repeat="tab in model.mkSections.sm.tabs"
                 active="tab.active"
                 select="model.smlang=tab.lang">
                <tab-heading>
                    {{model.uriLocalizedNames[tab.lang]}}
                </tab-heading>
            </tab>
        </tabset>

        <div class="control-group" ng-show="model.hasSome()">
            <label class="control-label">
                {{'Organisaationtarkastelu.sosiaalinenmedia'| i18n}}
            </label>
            <div class="controls">
                <label class="control-label control-label-left">
                    <span ng-repeat="(index,value) in model.organisaatio.metadata.data.FACEBOOK" ng-if="index === model.smlang">
                        Facebook: <a ng-href="{{value| fixHttpLink}}">{{value}}</a><br>
                    </span>
                    <span ng-repeat="(index,value) in model.organisaatio.metadata.data.GOOGLE_PLUS" ng-if="index === model.smlang">
                        Google+: <a ng-href="{{value| fixHttpLink}}">{{value}}</a><br>
                    </span>
                    <span ng-repeat="(index,value) in model.organisaatio.metadata.data.LINKED_IN" ng-if="index === model.smlang">
                        LinkedIn: <a ng-href="{{value| fixHttpLink}}">{{value}}</a><br>
                    </span>
                    <span ng-repeat="(index,value) in model.organisaatio.metadata.data.TWITTER" ng-if="index === model.smlang">
                        Twitter: <a ng-href="{{value| fixHttpLink}}">{{value}}</a>
                    </span>
                    <span ng-repeat="(index,value) in model.organisaatio.metadata.data.MUU" ng-if="index === model.smlang">
                        <a ng-href="{{value| fixHttpLink}}">{{value}}</a>
                    </span>
                </label>
            </div>
        </div>
        <hr>
    </div> <!-- smexpanded -->

    <div class="row">
        <div class="span4">
            <div class="view-row-label">
                <a href="" ng-model="ectsexpanded" ng-click="ectsexpanded = !ectsexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':ectsexpanded, 'icon-chevron-right':!ectsexpanded}"></span>
                        {{'Organisaationtarkastelu.hakutoimistoectsnimi'| i18n}}
                    </label>
                </a>
            </div>
        </div>
    </div>

    <div ng-show="ectsexpanded">
        <div class="control-group" ng-if="model.organisaatio.metadata.hakutoimistoEctsNimi">
            <label class="control-label">
                {{'Organisaationtarkastelu.hakutoimistoectsnimi'| i18n}}
            </label>
            <div class="controls">
                <label class="control-label control-label-left">
                    <span>{{model.organisaatio.metadata.hakutoimistoEctsNimi}}</span>
                    <span ng-if="model.organisaatio.metadata.hakutoimistoEctsTehtavanimike">,&nbsp;
                        {{model.organisaatio.metadata.hakutoimistoEctsTehtavanimike}}
                    </span><br>
                    <span ng-if="model.organisaatio.metadata.hakutoimistoEctsPuhelin">
                        {{model.organisaatio.metadata.hakutoimistoEctsPuhelin}}
                    </span>
                    <span ng-if="model.organisaatio.metadata.hakutoimistoEctsEmail">
                        <span ng-if="model.organisaatio.metadata.hakutoimistoEctsPuhelin">,&nbsp;</span>
                        {{model.organisaatio.metadata.hakutoimistoEctsEmail}}
                    </span>
                </label>
            </div>
        </div>
        <hr>
    </div> <!-- ectsexpanded -->

    <div class="row">
        <div class="span4">
            <div class="view-row-label">
                <a href="" ng-model="ktexpanded" ng-click="ktexpanded = !ktexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':ktexpanded, 'icon-chevron-right':!ktexpanded}"></span>
                        {{'Organisaationtarkastelu.koulutustarjoajatiedot'| i18n}}
                    </label>
                </a>
            </div>
        </div>
    </div>

    <div ng-show="ktexpanded"> <!-- ktexpanded -->

        <tabset>
            <tab ng-repeat="tab in model.mkSections.kt.tabs"
                 active="tab.active"
                 select="model.ktlang=tab.lang">
                <tab-heading>
                    {{model.uriLocalizedNames[tab.lang]}}
                </tab-heading>
            </tab>
        </tabset>


        <div class="control-group" ng-repeat="field in model.kttypes" ng-show="model.organisaatio.metadata.data[field][model.ktlang]">
            <label class="control-label">
                {{'Organisaationtarkastelu.' + field| i18n}}
            </label>
            <div class="controls" ng-bind-html="model.organisaatio.metadata.data[field][model.ktlang]">
            </div>
        </div>
        <hr>
    </div> <!-- ktexpanded -->

    <div class="row">
        <div class="span4">
            <div class="view-row-label">
                <a href="" ng-model="oeexpanded" ng-click="oeexpanded = !oeexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':oeexpanded, 'icon-chevron-right':!oeexpanded}"></span>
                        {{'Organisaationtarkastelu.opiskelijanedut'| i18n}}
                    </label>
                </a>
            </div>
        </div>
    </div>

    <div ng-show="oeexpanded">
        <tabset>
            <tab ng-repeat="tab in model.mkSections.oe.tabs"
                 active="tab.active"
                 select="model.oelang=tab.lang">
                <tab-heading>
                    {{model.uriLocalizedNames[tab.lang]}}
                </tab-heading>
            </tab>
        </tabset>

        <div class="control-group" ng-repeat="field in model.oetypes" ng-show="model.organisaatio.metadata.data[field][model.oelang]">
            <label class="control-label">
                {{'Organisaationtarkastelu.' + field| i18n}}
            </label>
            <div class="controls" ng-bind-html="model.organisaatio.metadata.data[field][model.oelang]">
            </div>
        </div>
        <hr>
    </div> <!-- oeexpanded -->

    <div class="row">
        <div class="span4">
            <div class="view-row-label">
                <a href="" ng-model="aoexpanded" ng-click="aoexpanded = !aoexpanded">
                    <label>
                        <span ng-class="{'icon-chevron-down':aoexpanded, 'icon-chevron-right':!aoexpanded}"></span>
                        {{'Organisaationtarkastelu.sisaltyvatorganisaatiot'| i18n}}
                    </label>
                </a>
            </div>
        </div>
    </div>

    <div ng-if="aoexpanded">
        <div ng-repeat="aliorg in model.aliorganisaatiot track by aliorg.oid">
            <div class="row" ng-show="model.aliorganisaatiot.length">
                <label class="offset2">
                    <span ng-style="{'margin-left':'{{aliorg.level * 50}}px'}">
                        <a href='#/organisaatiot/{{aliorg.oid}}'>{{aliorg.nimi}}</a>
                    </span>
                </label>
            </div>
        </div>
        <hr>
    </div> <!-- aoexpanded -->
</form>