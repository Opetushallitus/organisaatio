<!-- Varhaiskasvatuksen toimipaikan tietojen muokkaus -->
<div ng-controller="VarhaiskasvatuksenToimipaikanTietojenMuokkausController as vakaeditctrl">
    <form name="form" class="form-horizontal" novalidate>
        <!-- Järjestämismuoto -->
        <div class="control-group">
            <label class="control-label">
                {{vakaeditctrl.t('Organisaationmuokkaus.ohje.jarjestamismuoto')}}*
            </label>
            <div class="controls">
                <select id="jarjestamismuoto" ng-model="vakaeditctrl.model.jarjestamismuoto"
                        ng-options="jarjestamismuoto.uri as jarjestamismuoto.nimi for jarjestamismuoto in vakaeditctrl.koodisto.jarjestamismuoto | orderBy:'uri'" required>
                    <option value="" tt="Organisaationmuokkaus.valitse">Valitse</option>
                </select>
                <div ng-if="!vakaeditctrl.model.jarjestamismuoto">
                    <input type="hidden" name="jarjestamismuoto" ng-model="vakaeditctrl.jarjestamismuoto" required>
                    <span class="text-error" ng-show="form.jarjestamismuoto.$error.required">
                        {{:: vakaeditctrl.t('Organisaationtarkastelu.jarjestamismuoto')}}
                        {{:: vakaeditctrl.t('Organisaationmuokkaus.validointi.pakollinen')}}
                    </span>
                </div>
            </div>
        </div>
        <!-- Kasvatusopillinen järjestelmä -->
        <div class="control-group">
            <label class="control-label">
                {{:: vakaeditctrl.t('Organisaationmuokkaus.ohje.kasvatusopillinenJarjestelma')}}*
            </label>
            <div class="controls">
                <select id="kasvatusopillinenJarjestelma" ng-model="vakaeditctrl.model.kasvatusopillinenJarjestelma"
                        ng-options="kasvatusopillinenJarjestelma.uri as kasvatusopillinenJarjestelma.nimi for kasvatusopillinenJarjestelma in vakaeditctrl.koodisto.kasvatusopillinenJarjestelma | orderBy:'uri'" required>
                    <option value="" tt="Organisaationmuokkaus.valitse">Valitse</option>
                </select>
                <div ng-if="!vakaeditctrl.model.kasvatusopillinenJarjestelma">
                    <input type="hidden" name="kasvatusopillinenJarjestelma" ng-model="vakaeditctrl.kasvatusopillinenJarjestelma" required>
                    <span class="text-error" ng-show="form.kasvatusopillinenJarjestelma.$error.required">
                        {{:: vakaeditctrl.t('Organisaationtarkastelu.kasvatusopillinenJarjestelma')}}
                        {{:: vakaeditctrl.t('Organisaationmuokkaus.validointi.pakollinen')}}
                    </span>
                </div>
            </div>
        </div>
        <!-- Toiminnallinen painotus -->
        <div class="control-group">
            <label class="control-label">
                {{:: vakaeditctrl.t('Organisaationmuokkaus.ohje.toiminnallinenPainotus')}}*
            </label>
            <div class="controls">
                <div>
                    <span ng-repeat="toiminnallinenpainotus in vakaeditctrl.model.varhaiskasvatuksenToiminnallinenpainotukset">
                    <button type="button" class="btn btn-small" id="{{'toiminnallinenpainotusbutton' + $index}}"
                            ng-click="vakaeditctrl.removeVarhaiskasvatuksenToiminnallinepainotus(toiminnallinenpainotus)">{{:: vakaeditctrl.localiseVarhaiskasvatuksenToiminnallinenpainotus(toiminnallinenpainotus.toiminnallinenpainotus)}} {{:: vakaeditctrl.dbFormatToUI(toiminnallinenpainotus.alkupvm)}} - {{:: vakaeditctrl.dbFormatToUI(toiminnallinenpainotus.loppupvm)}}<i class="icon-remove"></i></button>
                    </span>
                </div>
                <div>
                    <select id="toiminnallinenpainotus" ng-model="vakaeditctrl.toiminnallinenpainotus.toiminnallinenpainotus" ng-required="false"
                            ng-options="toiminnallinenpainotus.uri as toiminnallinenpainotus.nimi for toiminnallinenpainotus in vakaeditctrl.koodisto.toiminnallinenPainotus | orderBy:'uri'" required>
                        <option value="" tt="Organisaationmuokkaus.valitsetoiminnallinenpainotus">Valitse</option>
                    </select>
                    <input id="toiminnallinenpainotus.alkupvm" ng-model="vakaeditctrl.toiminnallinenpainotus.alkupvm"
                           name="luontipvm" formatteddate uib-datepicker-popup="dd.MM.yyyy"
                           is-open="vakaeditctrl.dpOpen1" ng-click="vakaeditctrl.dpOpen1=true" min="'1900-01-01'" max="'2030-12-31'"
                           close-on-date-selection="true"
                           ie-placeholder placeholder="{{:: vakaeditctrl.t('Organisaationmuokkaus.luontipvm')}}"
                           close-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.sulje')}}"
                           current-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.tanaan')}}"
                           clear-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.tyhjenna')}}"
                           toggle-weeks-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.viikkonumerot')}}"
                    />
                    <input id="toiminnallinenpainotus.loppupvm" ng-model="vakaeditctrl.toiminnallinenpainotus.loppupvm"
                           name="loppupvm" formatteddate uib-datepicker-popup="dd.MM.yyyy"
                           is-open="vakaeditctrl.dpOpen2" ng-click="vakaeditctrl.dpOpen2=true" min="'1900-01-01'" max="'2030-12-31'"
                           close-on-date-selection="true"
                           ie-placeholder placeholder="{{:: vakaeditctrl.t('Organisaationmuokkaus.lakkautuspvm')}}"
                           close-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.sulje')}}"
                           current-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.tanaan')}}"
                           clear-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.tyhjenna')}}"
                           toggle-weeks-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.viikkonumerot')}}"
                    />
                    <button class="btn" ng-click="vakaeditctrl.addVarhaiskasvatuksenToiminnallinenpainotus()">
                        <i class="icon-plus"></i> {{:: vakaeditctrl.t('Organisaationmuokkaus.luoToiminnallinenpainotus')}}
                    </button>
                </div>
                <div ng-if="vakaeditctrl.model.varhaiskasvatuksenToiminnallinenpainotukset.length === 0">
                    <input type="hidden" name="varhaiskasvatuksenToiminnallinenpainotuksetPlaceholder" ng-model="vakaeditctrl.varhaiskasvatuksenToiminnallinenpainotuksetPlaceholder" required>
                    <span class="text-error" ng-show="form.varhaiskasvatuksenToiminnallinenpainotuksetPlaceholder.$error.required">
                    {{:: vakaeditctrl.t('Organisaationmuokkaus.ohje.varhaiskasvatuksenToiminnallinenpainotukset')}}
                    {{:: vakaeditctrl.t('Organisaationmuokkaus.validointi.pakollinen')}}
                    </span>
                </div>
            </div>
        </div>
        <!-- Paikkojen lukumäärä -->
        <div class="control-group">
            <label class="control-label">
                {{t('Organisaationmuokkaus.ohje.paikkojenLukumaara')}}*
            </label>
            <div class="controls">
                <input id="paikkojenLukumaara" ng-model="vakaeditctrl.model.paikkojenLukumaara" />
                <div ng-if="!vakaeditctrl.model.paikkojenLukumaara">
                    <input type="hidden" name="paikkojenLukumaara" ng-model="vakaeditctrl.paikkojenLukumaara" required>
                    <span class="text-error" ng-show="form.paikkojenLukumaara.$error.required">
                        {{:: vakaeditctrl.t('Organisaationtarkastelu.paikkojenLukumaara')}}
                        {{:: vakaeditctrl.t('Organisaationmuokkaus.validointi.pakollinen')}}
                    </span>
                </div>
            </div>
        </div>
        <!-- Varhaiskasvatuksen toimintamuodot -->
        <div class="control-group">
            <label class="control-label">
                {{:: vakaeditctrl.t('Organisaationmuokkaus.ohje.varhaiskasvatuksenToimintamuodot')}}*
            </label>
            <div class="controls">
                <span ng-repeat="toimintamuoto in vakaeditctrl.model.varhaiskasvatuksenToimintamuodot">
                    <button type="button"
                            class="btn btn-small"
                            ng-click="vakaeditctrl.removeVarhaiskasvatuksenToimintamuoto(toimintamuoto);form.$dirty = true">
                        {{:: vakaeditctrl.localiseVarhaiskasvatuksenToimintamuoto(toimintamuoto)}}&nbsp;<i class="icon-remove"></i>
                    </button>
                </span>
                <select id="toimintamuodot" ng-model="vakaeditctrl.toimintamuoto"
                        ng-options="toimintamuoto.uri as toimintamuoto.nimi for toimintamuoto in vakaeditctrl.getUnselectedToimintamuodot() | orderBy:'uri'"
                        ng-change="vakaeditctrl.addVarhaiskasvatuksenToimintamuoto()"
                        >
                    <option value="" tt="Organisaationmuokkaus.valitse">Valitse</option>
                </select>
                <div ng-if="!vakaeditctrl.model.varhaiskasvatuksenToimintamuodot.length">
                    <input type="hidden" name="toimintamuodot" ng-model="vakaeditctrl.toimintamuodot" required>
                    <span class="text-error" ng-show="form.toimintamuodot.$error.required">
                    {{:: vakaeditctrl.t('Organisaationtarkastelu.varhaiskasvatuksenToimintamuodot')}}
                    {{:: vakaeditctrl.t('Organisaationmuokkaus.validointi.pakollinen')}}
                </span>
                </div>
            </div>
        </div>
        <!-- Varhaiskasvatuksen kielipainotukset -->
        <div class="control-group">
            <label class="control-label">
                {{:: vakaeditctrl.t('Organisaationmuokkaus.ohje.varhaiskasvatuksenKielipainotukset')}}*
            </label>
            <div class="controls">
                <div>
                    <span  ng-repeat="kielipainotus in vakaeditctrl.model.varhaiskasvatuksenKielipainotukset">
                    <button type="button" class="btn btn-small" id="{{'kielipainotusbutton' + $index}}"
                            ng-click="vakaeditctrl.removeKielipainotus(kielipainotus)">{{:: vakaeditctrl.localiseKielipainotus(kielipainotus.kielipainotus)}} {{:: vakaeditctrl.dbFormatToUI(kielipainotus.alkupvm)}} - {{:: vakaeditctrl.dbFormatToUI(kielipainotus.loppupvm)}}<i class="icon-remove"></i></button>
                    </span>
                </div>
                <div>
                    <select id="kielipainotus" ng-model="vakaeditctrl.kielipainotus.kielipainotus" ng-required="false"
                            ng-options="kielipainotus.uri as kielipainotus.nimi for kielipainotus in vakaeditctrl.koodisto.kieli | orderBy:'uri'" required>
                        <option value="" tt="Organisaationmuokkaus.valitsekielipainotus">Valitse</option>
                    </select>
                    <input id="kielipainotus.alkupvm" ng-model="vakaeditctrl.kielipainotus.alkupvm"
                           name="luontipvm" formatteddate uib-datepicker-popup="dd.MM.yyyy"
                           is-open="vakaeditctrl.dpOpen3" ng-click="vakaeditctrl.dpOpen3=true" min="'1900-01-01'" max="'2030-12-31'"
                           close-on-date-selection="true"
                           ie-placeholder placeholder="{{:: vakaeditctrl.t('Organisaationmuokkaus.luontipvm')}}"
                           close-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.sulje')}}"
                           current-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.tanaan')}}"
                           clear-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.tyhjenna')}}"
                           toggle-weeks-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.viikkonumerot')}}"
                    />
                    <input id="kielipainotus.loppupvm" ng-model="vakaeditctrl.kielipainotus.loppupvm"
                           name="loppupvm" formatteddate uib-datepicker-popup="dd.MM.yyyy"
                           is-open="vakaeditctrl.dpOpen4" ng-click="vakaeditctrl.dpOpen4=true" min="'1900-01-01'" max="'2030-12-31'"
                           close-on-date-selection="true"
                           ie-placeholder placeholder="{{:: vakaeditctrl.t('Organisaationmuokkaus.lakkautuspvm')}}"
                           close-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.sulje')}}"
                           current-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.tanaan')}}"
                           clear-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.tyhjenna')}}"
                           toggle-weeks-text="{{:: vakaeditctrl.t('Organisaationmuokkaus.viikkonumerot')}}"
                    />
                    <button class="btn" ng-click="vakaeditctrl.addKielipainotus()">
                        <i class="icon-plus"></i> {{:: vakaeditctrl.t('Organisaationmuokkaus.luoKielipainotus')}}
                    </button>
                </div>
                <div ng-if="vakaeditctrl.model.varhaiskasvatuksenKielipainotukset.length === 0">
                    <input type="hidden" name="varhaiskasvatuksenKielipainotuksetPlaceholder" ng-model="vakaeditctrl.varhaiskasvatuksenKielipainotuksetPlaceholder" required>
                    <span class="text-error" ng-show="form.varhaiskasvatuksenKielipainotuksetPlaceholder.$error.required">
                        {{:: vakaeditctrl.t('Organisaationmuokkaus.ohje.varhaiskasvatuksenKielipainotukset')}}
                        {{:: vakaeditctrl.t('Organisaationmuokkaus.validointi.pakollinen')}}
                    </span>
                </div>
            </div>
        </div>
    </form>
</div>
